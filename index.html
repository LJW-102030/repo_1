<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alinux Repository Terminal</title>
    <style>
        /* é»‘å®¢çµ‚ç«¯é¢¨æ ¼é…è‰² */
        body {
            background-color: #000;
            color: #00ff41;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            padding: 50px 20px;
            margin: 0;
        }

        .terminal {
            width: 100%;
            max-width: 800px;
            border: 1px solid #00ff41;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.15);
            background: rgba(0, 0, 0, 0.9);
        }

        .header {
            text-align: center;
            border-bottom: 1px dashed #00ff41;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        h1 { margin: 0; font-size: 1.5em; letter-spacing: 2px; }
        .sub { font-size: 0.8em; opacity: 0.7; margin-top: 5px; }

        /* å¥—ä»¶åˆ—è¡¨ */
        #package-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .pkg-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #111;
            transition: background 0.2s;
        }

        .pkg-item:hover {
            background: rgba(0, 255, 65, 0.05);
        }

        .pkg-name { font-weight: bold; }
        
        /* ä¸‹è¼‰æŒ‰éˆ• */
        .download-btn {
            color: #000;
            background: #00ff41;
            text-decoration: none;
            padding: 3px 12px;
            font-size: 0.85em;
            font-weight: bold;
            border-radius: 1px;
        }

        .download-btn:hover {
            background: #fff;
            box-shadow: 0 0 8px #fff;
        }

        .status-bar {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px dashed #333;
            font-size: 0.85em;
            color: #666;
        }

        .error { color: #ff3e3e; border: 1px solid #ff3e3e; padding: 10px; }
    </style>
</head>
<body>

<div class="terminal">
    <div class="header">
        <h1>ğŸ›°ï¸ ALINUX_REPO_v1.1</h1>
        <div class="sub">CORE DATABASE SYSTEM: ONLINE</div>
    </div>

    <ul id="package-list">
        <li>[SYSTEM] æ­£åœ¨è®€å– info/package.list...</li>
    </ul>

    <div class="status-bar">
        > ç”¨æ³•: apm install [å¥—ä»¶å]<br>
        > ä¾†æº: GitHub Pages / Alinux Project
    </div>
</div>

<script>
    const listElement = document.getElementById('package-list');

    // æŠ“å– info è³‡æ–™å¤¾ä¸‹çš„æ¸…å–®ï¼Œä¸¦åŠ ä¸Šéš¨æ©Ÿåƒæ•¸é¿å…å¿«å–
    fetch('info/package.list?cache=' + Math.random())
        .then(response => {
            // é—œéµæª¢æŸ¥ï¼šå¦‚æœä¸æ˜¯ HTTP 200ï¼Œå°±è¦–ç‚ºå¤±æ•—
            if (!response.ok) {
                throw new Error(`æ‰¾ä¸åˆ°æ¸…å–®æª”æ¡ˆ (HTTP ${response.status})`);
            }
            return response.text();
        })
        .then(text => {
            // è™•ç†ç´”æ–‡å­—æ¸…å–®ï¼šç§»é™¤ç©ºç™½åˆ—ï¼Œä¸¦æ’é™¤åŒ…å« HTML æ¨™ç±¤çš„å…§å®¹ï¼ˆé˜²ç¯„ 404 èª¤è®€ï¼‰
            const packages = text.split('\n')
                                 .map(line => line.trim())
                                 .filter(line => line.length > 0 && !line.includes('<'));

            if (packages.length === 0) {
                listElement.innerHTML = "<li>[!] ç›®å‰ç„¡å¯ç”¨å¥—ä»¶æ¸…å–®ã€‚</li>";
                return;
            }

            listElement.innerHTML = ''; // æ¸…ç©ºè¼‰å…¥ä¸­æ–‡å­—

            packages.forEach(name => {
                const li = document.createElement('li');
                li.className = 'pkg-item';
                li.innerHTML = `
                    <span class="pkg-name">> ${name}.aip</span>
                    <a href="package/${name}.aip" class="download-btn">DOWNLOAD</a>
                `;
                listElement.appendChild(li);
            });
        })
        .catch(err => {
            listElement.innerHTML = `<li class="error">[ERROR] ${err.message}</li>`;
        });
</script>

</body>
</html>
